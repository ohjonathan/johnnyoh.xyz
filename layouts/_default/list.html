{{ define "main" }}
<section class="list-page">
  <header class="page-header">
    <h1 class="page-title">{{ .Title }}</h1>
    {{ with .Description }}
    <p class="page-description">{{ . }}</p>
    {{ end }}
  </header>

  {{ if eq .Section "posts" }}
  <div class="section writing-section">
    {{ range .Pages }}
    <a href="{{ .Permalink }}" class="post-item">
      <span class="post-title">{{ .Title }}</span>
      <span class="post-date">{{ .Date.Format "Jan 2006" }}</span>
    </a>
    {{ end }}
  </div>

  {{ else if or (eq .Section "roles") (eq .Section "jobs") }}
  <div class="section writing-section">
    {{ range .Pages.ByDate.Reverse }}
    <a href="{{ .Permalink }}" class="post-item">
      <span class="post-title">{{ .Title }}</span>
      <span class="post-date">
        {{ $roleID := or .Params.role_id .Params.job_id }}
        {{ with $roleID }}
        {{ . | upper }}
        {{ else }}
        MISSING-ID
        {{ end }}
      </span>
    </a>
    {{ end }}
  </div>

  {{ else if eq .Section "projects" }}
  <div class="section projects-section">
    {{ range .Pages.ByDate.Reverse }}
    <a href="{{ .Permalink }}" class="project-card">
      <div class="card-top">
        <h3>{{ .Title }}</h3>
        {{ with .Params.tag }}
        <span class="card-tag">{{ . }}</span>
        {{ end }}
      </div>
      {{ with .Params.philosophy }}
      <p class="card-philosophy">"{{ . }}"</p>
      {{ end }}
      {{ with .Description }}
      <p class="card-description">{{ . }}</p>
      {{ end }}
      {{ with .Params.meta }}
      <div class="card-bottom">
        {{ range . }}
        <span>{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
    </a>
    {{ end }}

    <div class="github-stats">
      <div class="github-stats-header">
        <h2>GitHub Activity</h2>
      </div>
      <div class="github-stats-images">
        <img class="github-stats-img github-stats-editorial"
             src="https://github-readme-streak-stats.herokuapp.com/?user=ohjonathan&theme=default&hide_border=true&background=00000000"
             alt="GitHub streak" loading="lazy" />
        <img class="github-stats-img github-stats-terminal"
             src="https://github-readme-streak-stats.herokuapp.com/?user=ohjonathan&theme=radical&hide_border=true&background=00000000"
             alt="GitHub streak" loading="lazy" />
      </div>
      <p class="github-stats-note">Stats refresh every few hours. <a href="https://github.com/ohjonathan" target="_blank" rel="noopener">View live on GitHub &rarr;</a></p>
    </div>
  </div>

  {{ else }}
  <div class="section">
    {{ range .Pages }}
    <a href="{{ .Permalink }}" class="post-item">
      <span class="post-title">{{ .Title }}</span>
      <span class="post-date">{{ .Date.Format "Jan 2006" }}</span>
    </a>
    {{ end }}
  </div>
  {{ end }}
</section>
{{ end }}
